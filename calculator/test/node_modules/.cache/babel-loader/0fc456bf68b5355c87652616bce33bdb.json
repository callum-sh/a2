{"ast":null,"code":"import _defineProperty from\"/Users/callum/Documents/school/csc301/a2/calculator/frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/callum/Documents/school/csc301/a2/calculator/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/callum/Documents/school/csc301/a2/calculator/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import AddIcon from\"@material-ui/icons/Add\";import{useState,useEffect}from\"react\";import axios from\"axios\";import List from\"./List\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Item(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setNewItems=_useState2[1];var _useState3=useState({name:\"\",price:\"\"}),_useState4=_slicedToArray(_useState3,2),formItem=_useState4[0],setFormItem=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isExpanded=_useState6[0],setExpanded=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),rows=_useState8[0],setRows=_useState8[1];useEffect(function(){getItems();},[]);function ItemShow(){setExpanded(true);setRows(3);}function getItems(){axios({method:\"GET\",url:\"/items/\"}).then(function(response){var data=response.data;setNewItems(data);}).catch(function(error){if(error.response){console.log(error.response);console.log(error.response.status);console.log(error.response.headers);}});}function addItem(event){axios({method:\"POST\",url:\"/items/\",data:{name:formItem.name,price:formItem.price}}).then(function(response){getItems();});setFormItem({name:\"\",price:\"\"});setExpanded(false);event.preventDefault();}function DeleteItem(id){axios({method:\"DELETE\",url:\"/items/\".concat(id,\"/\")}).then(function(response){getItems();});}function handleChange(event){var _event$target=event.target,value=_event$target.value,name=_event$target.name;setFormItem(function(prevItem){return _objectSpread(_objectSpread({},prevItem),{},_defineProperty({},name,value));});}return/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"create-note\",children:[isExpanded&&/*#__PURE__*/_jsx(\"input\",{onChange:handleChange,type:\"text\",text:formItem.name,name:\"name\",placeholder:\"item name\",value:formItem.name}),/*#__PURE__*/_jsx(\"input\",{onClick:ItemShow,onChange:handleChange,type:\"number\",name:\"price\",placeholder:\"add price ($)\",rows:rows,value:formItem.price}),isExpanded&&/*#__PURE__*/_jsx(\"button\",{onClick:addItem,children:/*#__PURE__*/_jsx(AddIcon,{})})]}),items&&items.map(function(item){return/*#__PURE__*/_jsx(List,{id:item.id,name:item.name,price:item.price,deletion:DeleteItem},item.id);})]});}export default Item;","map":{"version":3,"names":["AddIcon","useState","useEffect","axios","List","Item","items","setNewItems","name","price","formItem","setFormItem","isExpanded","setExpanded","rows","setRows","getItems","ItemShow","method","url","then","response","data","catch","error","console","log","status","headers","addItem","event","preventDefault","DeleteItem","id","handleChange","target","value","prevItem","map","item"],"sources":["/Users/callum/Documents/school/csc301/a2/calculator/frontend/src/components/Items.jsx"],"sourcesContent":["import AddIcon from \"@material-ui/icons/Add\";\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport List from \"./List\"\n\nfunction Item() {\n\n    const [items, setNewItems] = useState(null)\n    const [formItem, setFormItem] = useState({\n        name: \"\",\n        price: \"\"\n    })\n\n    const [isExpanded, setExpanded] = useState(false)\n    const [rows, setRows] = useState(1)\n\n    useEffect(() => {\n        getItems()\n    }, [])\n\n    function ItemShow() {\n        setExpanded(true)\n        setRows(3)\n    }\n\n    function getItems() {\n        axios({\n            method: \"GET\",\n            url: \"/items/\",\n        }).then((response) => {\n            const data = response.data\n            setNewItems(data)\n        }).catch((error) => {\n            if (error.response) {\n                console.log(error.response);\n                console.log(error.response.status);\n                console.log(error.response.headers);\n            }\n        })\n    }\n\n    function addItem(event) {\n        axios({\n            method: \"POST\",\n            url: \"/items/\",\n            data: {\n                name: formItem.name,\n                price: formItem.price\n            }\n        })\n            .then((response) => {\n                getItems()\n            })\n\n        setFormItem(({\n            name: \"\",\n            price: \"\"\n        }))\n        setExpanded(false)\n        event.preventDefault()\n    }\n\n    function DeleteItem(id) {\n        axios({\n            method: \"DELETE\",\n            url: `/items/${id}/`,\n        })\n            .then((response) => {\n                getItems()\n            })\n    }\n\n    function handleChange(event) {\n        const { value, name } = event.target\n        setFormItem(prevItem => ({\n            ...prevItem, [name]: value\n        })\n        )\n    }\n\n\n    return (\n\n        <div className=''>\n\n            <form className=\"create-note\">\n                {isExpanded && <input onChange={handleChange} type=\"text\" text={formItem.name} name=\"name\" placeholder=\"item name\" value={formItem.name} />}\n                <input onClick={ItemShow} onChange={handleChange} type=\"number\" name=\"price\" placeholder=\"add price ($)\" rows={rows} value={formItem.price} />\n                {isExpanded && <button onClick={addItem}>\n                    <AddIcon />\n                </button>}\n            </form>\n\n            {items && items.map(item => <List\n                key={item.id}\n                id={item.id}\n                name={item.name}\n                price={item.price}\n                deletion={DeleteItem}\n            />\n            )}\n\n        </div>\n\n    );\n}\n\nexport default Item;"],"mappings":"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"},"metadata":{},"sourceType":"module"}